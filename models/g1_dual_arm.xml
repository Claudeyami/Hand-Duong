<?xml version="1.0" encoding="utf-8"?>
<mujoco model="g1_dual_arm">
  <!-- ===== Limits Ä‘á»ƒ grasp á»•n Ä‘á»‹nh ===== -->
  <size nconmax="500" njmax="7000"/>

  <!-- ===== Compiler / Options / Defaults ===== -->
  <compiler angle="radian" meshdir="meshes" autolimits="true"/>
  <option gravity="0 0 -9.81" integrator="RK4" timestep="0.002"
          cone="elliptic" jacobian="dense" iterations="140" tolerance="2.0e-11"/>

  <default>
    <!-- ná»n chung -->
    <geom friction="1.0 0.1 0.01" solref="0.004 1.8" solimp="0.94 0.998 0.0003" rgba="0.8 0.8 0.8 1"/>
    <joint damping="0.35" stiffness="8" frictionloss="0.02" armature="0.01" limited="true"/>

    <!-- Finger links -->
    <default class="finger">
      <joint damping="0.30" stiffness="3.0" armature="0.02" frictionloss="0.02" limited="true"/>
      <geom  friction="2.6 0.06 0.004" solref="0.003 2.6" solimp="0.97 0.997 0.0003"
             condim="6" rgba="0.90 0.90 0.92 1"/>
    </default>

    <!-- Fingertip pads (ma sÃ¡t cao + compliance má»ng) -->
    <default class="pad">
      <geom friction="9.5 0.12 0.020"
            solref="0.0012 4.2"
            solimp="0.986 0.999 0.00010"
            margin="0.0016"
            condim="6" rgba="0.15 0.15 0.15 1"
            contype="1" conaffinity="1"/>
    </default>

    <!-- Palm collision (Ãªm, tÃ¡ch nhÃ³m va cháº¡m Ä‘á»ƒ khÃ´ng cáº¡ cube) -->
    <default class="palm">
      <geom friction="2.2 0.03 0.003" condim="6"
            solref="0.0022 2.6" solimp="0.965 0.996 0.00035"
            rgba="0.6 0.6 0.6 0.35"
            contype="2" conaffinity="2"/>
    </default>

    <!-- Arm joints -->
    <default class="armjoint">
      <joint damping="1.6" armature="0.06" frictionloss="0.04" stiffness="8" limited="true"/>
    </default>

    <!-- Torso collision shell (Ä‘á»¡ xuyÃªn ngÆ°á»i) -->
    <default class="torso_col">
      <geom type="box" rgba="0.2 0.7 0.7 0.15"
            friction="1.0 0.02 0.001" condim="6"
            solref="0.003 2.2" solimp="0.97 0.998 0.0003"/>
    </default>
  </default>

  <!-- ===== Assets / Meshes ===== -->
  <asset>
    <texture type="skybox" builtin="flat" rgb1="0 0 0" rgb2="0 0 0" width="512" height="3072"/>
    <texture type="2d" name="groundplane" builtin="checker" mark="edge"
             rgb1="0.2 0.3 0.4" rgb2="0.1 0.2 0.3" markrgb="0.8 0.8 0.8" width="300" height="300"/>
    <material name="groundplane" texture="groundplane" texuniform="true" texrepeat="5 5" reflectance="0.2"/>

    <!-- visual meshes -->
    <mesh name="waist_yaw_link"            file="waist_yaw_link.STL"/>
    <mesh name="waist_roll_link"           file="waist_roll_link.STL"/>
    <mesh name="torso_link"                file="torso_link.STL"/>
    <mesh name="logo_link"                 file="logo_link.STL"/>
    <mesh name="head_link"                 file="head_link.STL"/>
    <mesh name="waist_support_link"        file="waist_support_link.STL"/>
    <mesh name="left_shoulder_pitch_link"  file="left_shoulder_pitch_link.STL"/>
    <mesh name="left_shoulder_roll_link"   file="left_shoulder_roll_link.STL"/>
    <mesh name="left_shoulder_yaw_link"    file="left_shoulder_yaw_link.STL"/>
    <mesh name="left_elbow_link"           file="left_elbow_link.STL"/>
    <mesh name="left_wrist_roll_link"      file="left_wrist_roll_link.STL"/>
    <mesh name="left_wrist_pitch_link"     file="left_wrist_pitch_link.STL"/>
    <mesh name="left_wrist_yaw_link"       file="left_wrist_yaw_link.STL"/>
    <mesh name="left_rubber_hand"          file="left_rubber_hand.STL"/>
    <mesh name="right_shoulder_pitch_link" file="right_shoulder_pitch_link.STL"/>
    <mesh name="right_shoulder_roll_link"  file="right_shoulder_roll_link.STL"/>
    <mesh name="right_shoulder_yaw_link"   file="right_shoulder_yaw_link.STL"/>
    <mesh name="right_elbow_link"          file="right_elbow_link.STL"/>
    <mesh name="right_wrist_roll_link"     file="right_wrist_roll_link.STL"/>
    <mesh name="right_wrist_pitch_link"    file="right_wrist_pitch_link.STL"/>
    <mesh name="right_wrist_yaw_link"      file="right_wrist_yaw_link.STL"/>
    <mesh name="right_rubber_hand"         file="right_rubber_hand.STL"/>
  </asset>

  <!-- ===== Visual / Stat ===== -->
  <visual>
    <headlight diffuse="0.6 0.6 0.6" ambient="0.1 0.1 0.1" specular="0.9 0.9 0.9"/>
    <rgba haze="0.15 0.25 0.35 1"/>
    <global azimuth="-140" elevation="-20"/>
  </visual>
  <statistic center="1.0 0.7 1.0" extent="0.8"/>

  <!-- ===== Worldbody ===== -->
  <worldbody>
    <light pos="1 0 3.5" dir="0 0 -1" directional="true"/>
    <geom name="floor" size="0 0 0.05" type="plane" material="groundplane"/>

    <!-- Fixed base visuals (no collision) -->
    <geom type="mesh" contype="0" conaffinity="0" group="1" density="0" mesh="waist_yaw_link"/>
    <geom pos="-0.0039635 0 0.035" type="mesh" contype="0" conaffinity="0" group="1" density="0" mesh="waist_roll_link"/>
    <geom pos="-0.0039635 0 0.054" type="mesh" contype="0" conaffinity="0" group="1" density="0" mesh="torso_link"/>
    <geom type="mesh" contype="0" conaffinity="0" group="1" density="0" rgba="0.2 0.2 0.2 1" mesh="logo_link"/>
    <geom type="mesh" contype="0" conaffinity="0" group="1" density="0" rgba="0.2 0.2 0.2 1" mesh="head_link"/>
    <geom type="mesh" contype="0" conaffinity="0" group="1" density="0" mesh="waist_support_link"/>

    <!-- Torso collision shells -->
    <geom class="torso_col" name="torso_col_main" size="0.12 0.10 0.09" pos="0.03 0.00 0.33"/>
    <geom class="torso_col" name="torso_col_l"    size="0.06 0.03 0.06" pos="0.00  0.13 0.33"/>
    <geom class="torso_col" name="torso_col_r"    size="0.06 0.03 0.06" pos="0.00 -0.13 0.33"/>

    <!-- Plate -->
    <geom name="plate" type="box" size="0.15 0.15 0.02" pos="0.12 0.00 0.02" rgba="0.3 0.3 0.35 1"
          friction="0.9 0.01 0.001" solref="0.003 3" solimp="0.95 0.999 0.0002" condim="6"/>
    <site name="plate_top" pos="0.12 0.00 0.04" size="0.005" type="sphere" rgba="0.2 0.7 0.9 0.7"/>

    <!-- Grasp object (cube cháº¡m máº·t plate) -->
    <body name="grasp_cube" pos="0.12 0.00 0.0400">
      <joint name="grasp_cube_free" type="free"/>
      <geom name="grasp_cube_geom" type="box" size="0.02 0.02 0.02"
            mass="0.08" rgba="0.9 0.4 0.2 1.0"
            friction="2.6 0.03 0.003" condim="6"
            solref="0.0018 3.2" solimp="0.955 0.999 0.00018"
            contype="1" conaffinity="1"/>
      <site name="cube_top" pos="0 0 0.02" size="0.004" rgba="0.1 0.8 0.9 1"/>
      <site name="cube_grasp_target" pos="0 0 0.030" size="0.004" rgba="0.2 0.9 0.2 0.8"/>
    </body>

    <!-- ================= LEFT ARM ================= -->
    <!-- (nguyÃªn khá»‘i cÃ¡nh tay nhÆ° báº¡n Ä‘Ã£ cÃ³; khÃ´ng Ä‘á»•i hÃ¬nh há»c) -->
    <!-- Báº¯t Ä‘áº§u LEFT ARM -->
    <body name="left_shoulder_pitch_link" pos="-7.2e-06 0.10022 0.29178" quat="0.990264 0.139201 1.38722e-05 -9.86868e-05">
      <inertial pos="0 0.035892 -0.011628" quat="0.654152 0.0130458 -0.326267 0.68225" mass="0.718"
                diaginertia="0.000465864 0.000432842 0.000406394"/>
      <joint class="armjoint" name="left_shoulder_pitch_joint" pos="0 0 0" axis="0 1 0" range="-2.2 1.6"/>
      <geom type="mesh" group="1" mesh="left_shoulder_pitch_link" contype="0" conaffinity="0"/>
      <geom size="0.03 0.025" pos="0 0.04 -0.01" quat="0.707107 0 0.707107 0" type="cylinder"/>

      <body name="left_shoulder_roll_link" pos="0 0.038 -0.013831" quat="0.990268 -0.139172 0 0">
        <inertial pos="-0.000227 0.00727 -0.063243" quat="0.701256 -0.0196223 -0.00710317 0.712604" mass="0.643"
                  diaginertia="0.000691311 0.000618011 0.000388977"/>
        <joint class="armjoint" name="left_shoulder_roll_joint" pos="0 0 0" axis="1 0 0" range="-1.2 1.2"/>
        <geom type="mesh" group="1" mesh="left_shoulder_roll_link" contype="0" conaffinity="0"/>
        <geom size="0.03 0.015" pos="-0.004 0.006 -0.053" type="cylinder"/>

        <body name="left_shoulder_yaw_link" pos="0 0.00624 -0.1032">
          <inertial pos="0.010773 -0.002949 -0.072009" quat="0.716879 -0.0964829 -0.0679942 0.687134" mass="0.734"
                    diaginertia="0.00106187 0.00103217 0.000400661"/>
          <joint class="armjoint" name="left_shoulder_yaw_joint" pos="0 0 0" axis="0 0 1" range="-2.0 2.0"/>
          <geom type="mesh" group="1" mesh="left_shoulder_yaw_link" contype="0" conaffinity="0"/>

          <body name="left_elbow_link" pos="0.015783 0 -0.080518">
            <inertial pos="0.064956 0.004454 -0.010062" quat="0.541765 0.636132 0.388821 0.388129" mass="0.6"
                      diaginertia="0.000443035 0.000421612 0.000259353"/>
            <joint class="armjoint" name="left_elbow_joint" pos="0 0 0" axis="0 1 0" range="0.0 2.0"/>
            <geom type="mesh" group="1" mesh="left_elbow_link" contype="0" conaffinity="0"/>

            <body name="left_wrist_roll_link" pos="0.1 0.00188791 -0.01">
              <inertial pos="0.0171394 0.000537591 4.8864e-07" quat="0.575338 0.411667 -0.574906 0.411094" mass="0.085445"
                        diaginertia="5.48211e-05 4.96646e-05 3.57798e-05"/>
              <joint class="armjoint" name="left_wrist_roll_joint" pos="0 0 0" axis="1 0 0" range="-1.6 1.6"/>
              <geom type="mesh" group="1" mesh="left_wrist_roll_link" contype="0" conaffinity="0"/>

              <body name="left_wrist_pitch_link" pos="0.038 0 0">
                <inertial pos="0.0229999 -0.00111685 -0.00111658" quat="0.249998 0.661363 0.293036 0.643608" mass="0.48405"
                          diaginertia="0.000430353 0.000429873 0.000164648"/>
                <joint class="armjoint" name="left_wrist_pitch_joint" pos="0 0 0" axis="0 1 0" range="-1.2 1.2"/>
                <geom type="mesh" group="1" mesh="left_wrist_pitch_link" contype="0" conaffinity="0"/>

                <body name="left_wrist_yaw_link" pos="0.046 0 0">
                  <inertial pos="0.0708244 0.000191745 0.00161742" quat="0.510571 0.526295 0.468078 0.493188" mass="0.254576"
                            diaginertia="0.000646113 0.000559993 0.000147566"/>
                  <joint class="armjoint" name="left_wrist_yaw_joint" pos="0 0 0" axis="0 0 1" range="-1.2 1.2"/>
                  <geom type="mesh" group="1" mesh="left_wrist_yaw_link" contype="0" conaffinity="0"/>

                  <!-- left palm -->
                  <geom name="left_palm_base" type="box" size="0.040 0.025 0.008" pos="0.050 0.000 0.000" rgba="0.85 0.85 0.85 1"/>
                  <geom name="left_palm_col"  class="palm" type="box" size="0.038 0.023 0.007" pos="0.050 0.000 -0.001"/>
                  <geom name="left_palm_lipL" class="palm" type="box" size="0.024 0.003 0.007" pos="0.056 0.027 -0.001"/>
                  <geom name="left_palm_lipR" class="palm" type="box" size="0.024 0.003 0.007" pos="0.056 -0.027 -0.001"/>
                  <site name="left_palm_center" pos="0.050 0.000 -0.008" size="0.003" type="sphere" rgba="0.9 0.5 0.1 0.8"/>
                  <site name="left_ee_site" pos="0.120 0 0" size="0.005" type="sphere" rgba="0.2 0.8 0.2 1"/>

                  <!-- Rangefinder sites (LEFT) -->
                  <site name="left_rf_center" pos="0.095 0.000 0.000" quat="0.707107 0 -0.707107 0" size="0.002" rgba="0.60 0.90 0.20 0.80"/>
                  <site name="left_rf_u"      pos="0.095 0.015 0.000" quat="0.707107 0 -0.707107 0" size="0.002" rgba="0.60 0.90 0.20 0.80"/>
                  <site name="left_rf_d"      pos="0.095 -0.015 0.000" quat="0.707107 0 -0.707107 0" size="0.002" rgba="0.60 0.90 0.20 0.80"/>

                  <!-- IMU site -->
                  <site name="left_wrist_imu" pos="0 0 0" size="0.004" type="sphere" rgba="0.8 0.8 0.2 0.8"/>

                  <!-- ===== LEFT HAND (5 fingers) ===== -->
                  <!-- THUMB -->
                  <body name="left_thumb_cmc" pos="0.032 0.024 -0.006" quat="0.9239 0.2588 -0.2588 0.0871">
                    <inertial pos="0 0 0" mass="0.016" diaginertia="1.5e-5 1.5e-5 1.5e-5"/>
                    <joint name="left_thumb_cmc_abd"  type="hinge" axis="0 0 1" range="-0.6 0.8" class="finger"/>
                    <joint name="left_thumb_cmc_flex" type="hinge" axis="1 0 0" range="-0.4 1.0" class="finger"/>

                    <body name="left_thumb_mcp" pos="0 0 0">
                      <joint name="left_thumb_mcp" type="hinge" axis="0 1 0" range="-0.2 1.0" class="finger"/>
                      <geom type="capsule" size="0.0070 0.0130" fromto="0 0 0 0.026 0 0"/>
                      <geom type="capsule" size="0.0062 0.0130" fromto="0.003 0 0 0.026 0 0"/>

                      <body name="left_thumb_pip" pos="0.026 0 0">
                        <joint name="left_thumb_pip" type="hinge" axis="0 1 0" range="0 1.1" class="finger"/>
                        <geom type="capsule" size="0.0068 0.0115" fromto="0 0 0 0.023 0 0"/>
                        <geom type="capsule" size="0.0060 0.0115" fromto="0.003 0 0 0.023 0 0"/>

                        <body name="left_thumb_dip" pos="0.023 0 0">
                          <joint name="left_thumb_dip" type="hinge" axis="0 1 0" range="0 0.9" class="finger"/>
                          <geom type="capsule" size="0.0066 0.0100" fromto="0 0 0 0.020 0 0"/>
                          <geom type="capsule" size="0.0058 0.0100" fromto="0.003 0 0 0.020 0 0"/>
                          <geom name="left_thumb_tip_pad" class="pad" type="sphere" size="0.0075" pos="0.020 0 0"/>
                          <site name="left_thumb_tip" type="sphere" size="0.0040" pos="0.020 0 0" rgba="0.1 0.9 0.1 1"/>
                        </body>
                      </body>
                    </body>
                  </body>

                  <!-- INDEX -->
                  <body name="left_index_mcp_base" pos="0.090 0.016 0.000">
                    <inertial pos="0 0 0" mass="0.014" diaginertia="1.3e-5 1.3e-5 1.3e-5"/>
                    <joint name="left_index_mcp_abd" type="hinge" axis="0 0 1" range="-0.35 0.35" class="finger"/>
                    <body name="left_index_mcp" pos="0 0 0">
                      <joint name="left_index_mcp_flex" type="hinge" axis="0 1 0" range="-0.2 1.45" class="finger"/>
                      <geom type="capsule" size="0.0062 0.0115" fromto="0 0 0 0.023 0 0"/>
                      <geom type="capsule" size="0.0054 0.0115" fromto="0.003 0 0 0.023 0 0"/>
                      <body name="left_index_pip" pos="0.023 0 0">
                        <joint name="left_index_pip" type="hinge" axis="0 1 0" range="0 1.30" class="finger"/>
                        <geom type="capsule" size="0.0059 0.0105" fromto="0 0 0 0.021 0 0"/>
                        <geom type="capsule" size="0.0051 0.0105" fromto="0.003 0 0 0.021 0 0"/>
                        <body name="left_index_dip" pos="0.021 0 0">
                          <joint name="left_index_dip" type="hinge" axis="0 1 0" range="0 1.05" class="finger"/>
                          <geom type="capsule" size="0.0056 0.0085" fromto="0 0 0 0.017 0 0"/>
                          <geom type="capsule" size="0.0048 0.0085" fromto="0.003 0 0 0.017 0 0"/>
                          <geom name="left_index_tip_pad" class="pad" type="sphere" size="0.0063" pos="0.017 0 0"/>
                          <site name="left_index_tip" type="sphere" size="0.0034" pos="0.017 0 0" rgba="0.1 0.9 0.1 1"/>
                        </body>
                      </body>
                    </body>
                  </body>

                  <!-- MIDDLE -->
                  <body name="left_middle_mcp_base" pos="0.090 0.002 0.000">
                    <inertial pos="0 0 0" mass="0.015" diaginertia="1.4e-5 1.4e-5 1.4e-5"/>
                    <joint name="left_middle_mcp_abd" type="hinge" axis="0 0 1" range="-0.25 0.25" class="finger"/>
                    <body name="left_middle_mcp" pos="0 0 0">
                      <joint name="left_middle_mcp_flex" type="hinge" axis="0 1 0" range="-0.25 1.60" class="finger"/>
                      <geom type="capsule" size="0.0064 0.012" fromto="0 0 0 0.024 0 0"/>
                      <geom type="capsule" size="0.0056 0.012" fromto="0.003 0 0 0.024 0 0"/>
                      <body name="left_middle_pip" pos="0.024 0 0">
                        <joint name="left_middle_pip" type="hinge" axis="0 1 0" range="0 1.30" class="finger"/>
                        <geom type="capsule" size="0.0061 0.011" fromto="0 0 0 0.022 0 0"/>
                        <geom type="capsule" size="0.0053 0.011" fromto="0.003 0 0 0.022 0 0"/>
                        <body name="left_middle_dip" pos="0.022 0 0">
                          <joint name="left_middle_dip" type="hinge" axis="0 1 0" range="0 1.05" class="finger"/>
                          <geom type="capsule" size="0.0058 0.009" fromto="0 0 0 0.018 0 0"/>
                          <geom type="capsule" size="0.0050 0.009" fromto="0.003 0 0 0.018 0 0"/>
                          <geom name="left_middle_tip_pad" class="pad" type="sphere" size="0.0065" pos="0.018 0 0"/>
                          <site name="left_middle_tip" type="sphere" size="0.0034" pos="0.018 0 0" rgba="0.1 0.9 0.1 1"/>
                        </body>
                      </body>
                    </body>
                  </body>

                  <!-- RING -->
                  <body name="left_ring_mcp_base" pos="0.088 -0.011 0.000">
                    <inertial pos="0 0 0" mass="0.013" diaginertia="1.2e-5 1.2e-5 1.2e-5"/>
                    <joint name="left_ring_mcp_abd" type="hinge" axis="0 0 1" range="-0.35 0.35" class="finger"/>
                    <body name="left_ring_mcp" pos="0 0 0">
                      <joint name="left_ring_mcp_flex" type="hinge" axis="0 1 0" range="-0.25 1.55" class="finger"/>
                      <geom type="capsule" size="0.0061 0.0115" fromto="0 0 0 0.023 0 0"/>
                      <geom type="capsule" size="0.0053 0.0115" fromto="0.003 0 0 0.023 0 0"/>
                      <body name="left_ring_pip" pos="0.023 0 0">
                        <joint name="left_ring_pip" type="hinge" axis="0 1 0" range="0 1.25" class="finger"/>
                        <geom type="capsule" size="0.0058 0.0105" fromto="0 0 0 0.021 0 0"/>
                        <geom type="capsule" size="0.0050 0.0105" fromto="0.003 0 0 0.021 0 0"/>
                        <body name="left_ring_dip" pos="0.021 0 0">
                          <joint name="left_ring_dip" type="hinge" axis="0 1 0" range="0 1.00" class="finger"/>
                          <geom type="capsule" size="0.0055 0.0085" fromto="0 0 0 0.017 0 0"/>
                          <geom type="capsule" size="0.0047 0.0085" fromto="0.003 0 0 0.017 0 0"/>
                          <geom name="left_ring_tip_pad" class="pad" type="sphere" size="0.0063" pos="0.017 0 0"/>
                          <site name="left_ring_tip" type="sphere" size="0.0034" pos="0.017 0 0" rgba="0.1 0.9 0.1 1"/>
                        </body>
                      </body>
                    </body>
                  </body>

                  <!-- LITTLE -->
                  <body name="left_little_mcp_base" pos="0.084 -0.022 0.000">
                    <inertial pos="0 0 0" mass="0.012" diaginertia="1.1e-5 1.1e-5 1.1e-5"/>
                    <joint name="left_little_mcp_abd" type="hinge" axis="0 0 1" range="-0.4 0.4" class="finger"/>
                    <body name="left_little_mcp" pos="0 0 0">
                      <joint name="left_little_mcp_flex" type="hinge" axis="0 1 0" range="-0.25 1.45" class="finger"/>
                      <geom type="capsule" size="0.0056 0.0095" fromto="0 0 0 0.019 0 0"/>
                      <geom type="capsule" size="0.0048 0.0095" fromto="0.003 0 0 0.019 0 0"/>
                      <body name="left_little_pip" pos="0.019 0 0">
                        <joint name="left_little_pip" type="hinge" axis="0 1 0" range="0 1.20" class="finger"/>
                        <geom type="capsule" size="0.0053 0.008" fromto="0 0 0 0.016 0 0"/>
                        <geom type="capsule" size="0.0045 0.008" fromto="0.003 0 0 0.016 0 0"/>
                        <body name="left_little_dip" pos="0.016 0 0">
                          <joint name="left_little_dip" type="hinge" axis="0 1 0" range="0 0.95" class="finger"/>
                          <geom type="capsule" size="0.0050 0.007" fromto="0 0 0 0.014 0 0"/>
                          <geom type="capsule" size="0.0043 0.007" fromto="0.003 0 0 0.014 0 0"/>
                          <geom name="left_little_tip_pad" class="pad" type="sphere" size="0.0060" pos="0.014 0 0"/>
                          <site name="left_little_tip" type="sphere" size="0.0034" pos="0.014 0 0" rgba="0.1 0.9 0.1 1"/>
                        </body>
                      </body>
                    </body>
                  </body>

                </body> <!-- left_wrist_yaw_link -->
              </body>   <!-- left_wrist_pitch_link -->
            </body>     <!-- left_wrist_roll_link -->
          </body>       <!-- left_elbow_link -->
        </body>         <!-- left_shoulder_yaw_link -->
      </body>           <!-- left_shoulder_roll_link -->
    </body>             <!-- left_shoulder_pitch_link -->

    <!-- ================= RIGHT ARM ================= -->
    <body name="right_shoulder_pitch_link" pos="-7.2e-06 -0.10021 0.29178" quat="0.990264 -0.139201 1.38722e-05 9.86868e-05">
      <inertial pos="0 -0.035892 -0.011628" quat="0.68225 -0.326267 0.0130458 0.654152" mass="0.718"
                diaginertia="0.000465864 0.000432842 0.000406394"/>
      <joint class="armjoint" name="right_shoulder_pitch_joint" pos="0 0 0" axis="0 1 0" range="-2.2 1.6"/>
      <geom type="mesh" group="1" mesh="right_shoulder_pitch_link" contype="0" conaffinity="0"/>
      <geom size="0.03 0.025" pos="0 -0.04 -0.01" quat="0.707107 0 0.707107 0" type="cylinder"/>

      <body name="right_shoulder_roll_link" pos="0 -0.038 -0.013831" quat="0.990268 0.139172 0 0">
        <inertial pos="-0.000227 -0.00727 -0.063243" quat="0.712604 -0.00710317 -0.0196223 0.701256" mass="0.643"
                  diaginertia="0.000691311 0.000618011 0.000388977"/>
        <joint class="armjoint" name="right_shoulder_roll_joint" pos="0 0 0" axis="1 0 0" range="-1.2 1.2"/>
        <geom type="mesh" group="1" mesh="right_shoulder_roll_link" contype="0" conaffinity="0"/>
        <geom size="0.03 0.015" pos="-0.004 -0.006 -0.053" type="cylinder"/>

        <body name="right_shoulder_yaw_link" pos="0 -0.00624 -0.1032">
          <inertial pos="0.010773 0.002949 -0.072009" quat="0.687134 -0.0679942 -0.0964829 0.716879" mass="0.734"
                    diaginertia="0.00106187 0.00103217 0.000400661"/>
          <joint class="armjoint" name="right_shoulder_yaw_joint" pos="0 0 0" axis="0 0 1" range="-2.0 2.0"/>
          <geom type="mesh" group="1" mesh="right_shoulder_yaw_link" contype="0" conaffinity="0"/>

          <body name="right_elbow_link" pos="0.015783 0 -0.080518">
            <inertial pos="0.064956 -0.004454 -0.010062" quat="0.388129 0.388821 0.636132 0.541765" mass="0.6"
                      diaginertia="0.000443035 0.000421612 0.000259353"/>
            <joint class="armjoint" name="right_elbow_joint" pos="0 0 0" axis="0 1 0" range="0.0 2.0"/>
            <geom type="mesh" group="1" mesh="right_elbow_link" contype="0" conaffinity="0"/>

            <body name="right_wrist_roll_link" pos="0.1 -0.00188791 -0.01">
              <inertial pos="0.0171394 -0.000537591 4.8864e-07" quat="0.411667 0.575338 -0.411094 0.574906" mass="0.085445"
                        diaginertia="5.48211e-05 4.96646e-05 3.57798e-05"/>
              <joint class="armjoint" name="right_wrist_roll_joint" pos="0 0 0" axis="1 0 0" range="-1.6 1.6"/>
              <geom type="mesh" group="1" mesh="right_wrist_roll_link" contype="0" conaffinity="0"/>

              <body name="right_wrist_pitch_link" pos="0.038 0 0">
                <inertial pos="0.0229999 0.00111685 -0.00111658" quat="0.643608 0.293036 0.661363 0.249998" mass="0.48405"
                          diaginertia="0.000430353 0.000429873 0.000164648"/>
                <joint class="armjoint" name="right_wrist_pitch_joint" pos="0 0 0" axis="0 1 0" range="-1.2 1.2"/>
                <geom type="mesh" group="1" mesh="right_wrist_pitch_link" contype="0" conaffinity="0"/>

                <body name="right_wrist_yaw_link" pos="0.046 0 0">
                  <inertial pos="0.0708244 -0.000191745 0.00161742" quat="0.493188 0.468078 0.526295 0.510571" mass="0.254576"
                            diaginertia="0.000646113 0.000559993 0.000147566"/>
                  <joint class="armjoint" name="right_wrist_yaw_joint" pos="0 0 0" axis="0 0 1" range="-1.2 1.2"/>
                  <geom type="mesh" group="1" mesh="right_wrist_yaw_link" contype="0" conaffinity="0"/>

                  <!-- right palm -->
                  <geom name="right_palm_base" type="box" size="0.040 0.025 0.008" pos="0.050 0.000 0.000" rgba="0.85 0.85 0.85 1"/>
                  <geom name="right_palm_col"  class="palm" type="box" size="0.038 0.023 0.007" pos="0.050 0.000 -0.001"/>
                  <geom name="right_palm_lipL" class="palm" type="box" size="0.024 0.003 0.007" pos="0.056 -0.027 -0.001"/>
                  <geom name="right_palm_lipR" class="palm" type="box" size="0.024 0.003 0.007" pos="0.056 0.027 -0.001"/>
                  <site name="right_palm_center" pos="0.050 0.000 -0.008" size="0.003" type="sphere" rgba="0.9 0.5 0.1 0.8"/>
                  <site name="right_ee_site" pos="0.120 0 0" size="0.005" type="sphere" rgba="0.2 0.8 0.2 1"/>

                  <!-- Rangefinder sites (RIGHT) -->
                  <site name="right_rf_center" pos="0.095 0.000 0.000" quat="0.707107 0 -0.707107 0" size="0.002" rgba="0.60 0.90 0.20 0.80"/>
                  <site name="right_rf_u"      pos="0.095 0.015 0.000" quat="0.707107 0 -0.707107 0" size="0.002" rgba="0.60 0.90 0.20 0.80"/>
                  <site name="right_rf_d"      pos="0.095 -0.015 0.000" quat="0.707107 0 -0.707107 0" size="0.002" rgba="0.60 0.90 0.20 0.80"/>

                  <!-- IMU site -->
                  <site name="right_wrist_imu" pos="0 0 0" size="0.004" type="sphere" rgba="0.8 0.8 0.2 0.8"/>

                  <!-- ===== RIGHT HAND ===== -->
                  <!-- THUMB -->
                  <body name="right_thumb_cmc" pos="0.032 -0.024 -0.006" quat="0.9239 -0.2588 -0.2588 -0.0871">
                    <inertial pos="0 0 0" mass="0.016" diaginertia="1.5e-5 1.5e-5 1.5e-5"/>
                    <joint name="right_thumb_cmc_abd"  type="hinge" axis="0 0 1" range="-0.8 0.6" class="finger"/>
                    <joint name="right_thumb_cmc_flex" type="hinge" axis="1 0 0" range="-0.4 1.0" class="finger"/>
                    <body name="right_thumb_mcp" pos="0 0 0">
                      <joint name="right_thumb_mcp" type="hinge" axis="0 1 0" range="-0.2 1.0" class="finger"/>
                      <geom type="capsule" size="0.0070 0.0130" fromto="0 0 0 0.026 0 0"/>
                      <geom type="capsule" size="0.0062 0.0130" fromto="0.003 0 0 0.026 0 0"/>
                      <body name="right_thumb_pip" pos="0.026 0 0">
                        <joint name="right_thumb_pip" type="hinge" axis="0 1 0" range="0 1.1" class="finger"/>
                        <geom type="capsule" size="0.0068 0.0115" fromto="0 0 0 0.023 0 0"/>
                        <geom type="capsule" size="0.0060 0.0115" fromto="0.003 0 0 0.023 0 0"/>
                        <body name="right_thumb_dip" pos="0.023 0 0">
                          <joint name="right_thumb_dip" type="hinge" axis="0 1 0" range="0 0.9" class="finger"/>
                          <geom type="capsule" size="0.0066 0.0100" fromto="0 0 0 0.020 0 0"/>
                          <geom type="capsule" size="0.0058 0.0100" fromto="0.003 0 0 0.020 0 0"/>
                          <geom name="right_thumb_tip_pad" class="pad" type="sphere" size="0.0075" pos="0.020 0 0"/>
                          <site name="right_thumb_tip" type="sphere" size="0.0040" pos="0.020 0 0" rgba="0.1 0.9 0.1 1"/>
                        </body>
                      </body>
                    </body>
                  </body>

                  <!-- INDEX -->
                  <body name="right_index_mcp_base" pos="0.090 -0.016 0.000">
                    <inertial pos="0 0 0" mass="0.014" diaginertia="1.3e-5 1.3e-5 1.3e-5"/>
                    <joint name="right_index_mcp_abd" type="hinge" axis="0 0 1" range="-0.35 0.35" class="finger"/>
                    <body name="right_index_mcp" pos="0 0 0">
                      <joint name="right_index_mcp_flex" type="hinge" axis="0 1 0" range="-0.2 1.45" class="finger"/>
                      <geom type="capsule" size="0.0062 0.0115" fromto="0 0 0 0.023 0 0"/>
                      <geom type="capsule" size="0.0054 0.0115" fromto="0.003 0 0 0.023 0 0"/>
                      <body name="right_index_pip" pos="0.023 0 0">
                        <joint name="right_index_pip" type="hinge" axis="0 1 0" range="0 1.30" class="finger"/>
                        <geom type="capsule" size="0.0059 0.0105" fromto="0 0 0 0.021 0 0"/>
                        <geom type="capsule" size="0.0051 0.0105" fromto="0.003 0 0 0.021 0 0"/>
                        <body name="right_index_dip" pos="0.021 0 0">
                          <joint name="right_index_dip" type="hinge" axis="0 1 0" range="0 1.05" class="finger"/>
                          <geom type="capsule" size="0.0056 0.0085" fromto="0 0 0 0.017 0 0"/>
                          <geom type="capsule" size="0.0048 0.0085" fromto="0.003 0 0 0.017 0 0"/>
                          <geom name="right_index_tip_pad" class="pad" type="sphere" size="0.0063" pos="0.017 0 0"/>
                          <site name="right_index_tip" type="sphere" size="0.0034" pos="0.017 0 0" rgba="0.1 0.9 0.1 1"/>
                        </body>
                      </body>
                    </body>
                  </body>

                  <!-- MIDDLE -->
                  <body name="right_middle_mcp_base" pos="0.090 -0.002 0.000">
                    <inertial pos="0 0 0" mass="0.015" diaginertia="1.4e-5 1.4e-5 1.4e-5"/>
                    <joint name="right_middle_mcp_abd" type="hinge" axis="0 0 1" range="-0.25 0.25" class="finger"/>
                    <body name="right_middle_mcp" pos="0 0 0">
                      <joint name="right_middle_mcp_flex" type="hinge" axis="0 1 0" range="-0.25 1.60" class="finger"/>
                      <geom type="capsule" size="0.0064 0.012" fromto="0 0 0 0.024 0 0"/>
                      <geom type="capsule" size="0.0056 0.012" fromto="0.003 0 0 0.024 0 0"/>
                      <body name="right_middle_pip" pos="0.024 0 0">
                        <joint name="right_middle_pip" type="hinge" axis="0 1 0" range="0 1.30" class="finger"/>
                        <geom type="capsule" size="0.0061 0.011" fromto="0 0 0 0.022 0 0"/>
                        <geom type="capsule" size="0.0053 0.011" fromto="0.003 0 0 0.022 0 0"/>
                        <body name="right_middle_dip" pos="0.022 0 0">
                          <joint name="right_middle_dip" type="hinge" axis="0 1 0" range="0 1.05" class="finger"/>
                          <geom type="capsule" size="0.0058 0.009" fromto="0 0 0 0.018 0 0"/>
                          <geom type="capsule" size="0.0050 0.009" fromto="0.003 0 0 0.018 0 0"/>
                          <geom name="right_middle_tip_pad" class="pad" type="sphere" size="0.0065" pos="0.018 0 0"/>
                          <site name="right_middle_tip" type="sphere" size="0.0034" pos="0.018 0 0" rgba="0.1 0.9 0.1 1"/>
                        </body>
                      </body>
                    </body>
                  </body>

                  <!-- RING -->
                  <body name="right_ring_mcp_base" pos="0.088 0.011 0.000">
                    <inertial pos="0 0 0" mass="0.013" diaginertia="1.2e-5 1.2e-5 1.2e-5"/>
                    <joint name="right_ring_mcp_abd" type="hinge" axis="0 0 1" range="-0.35 0.35" class="finger"/>
                    <body name="right_ring_mcp" pos="0 0 0">
                      <joint name="right_ring_mcp_flex" type="hinge" axis="0 1 0" range="-0.25 1.55" class="finger"/>
                      <geom type="capsule" size="0.0061 0.0115" fromto="0 0 0 0.023 0 0"/>
                      <geom type="capsule" size="0.0053 0.0115" fromto="0.003 0 0 0.023 0 0"/>
                      <body name="right_ring_pip" pos="0.023 0 0">
                        <joint name="right_ring_pip" type="hinge" axis="0 1 0" range="0 1.25" class="finger"/>
                        <geom type="capsule" size="0.0058 0.0105" fromto="0 0 0 0.021 0 0"/>
                        <geom type="capsule" size="0.0050 0.0105" fromto="0.003 0 0 0.021 0 0"/>
                        <body name="right_ring_dip" pos="0.021 0 0">
                          <joint name="right_ring_dip" type="hinge" axis="0 1 0" range="0 1.00" class="finger"/>
                          <geom type="capsule" size="0.0055 0.0085" fromto="0 0 0 0.017 0 0"/>
                          <geom type="capsule" size="0.0047 0.0085" fromto="0.003 0 0 0.017 0 0"/>
                          <geom name="right_ring_tip_pad" class="pad" type="sphere" size="0.0063" pos="0.017 0 0"/>
                          <site name="right_ring_tip" type="sphere" size="0.0034" pos="0.017 0 0" rgba="0.1 0.9 0.1 1"/>
                        </body>
                      </body>
                    </body>
                  </body>

                  <!-- LITTLE -->
                  <body name="right_little_mcp_base" pos="0.084 0.022 0.000">
                    <inertial pos="0 0 0" mass="0.012" diaginertia="1.1e-5 1.1e-5 1.1e-5"/>
                    <joint name="right_little_mcp_abd" type="hinge" axis="0 0 1" range="-0.4 0.4" class="finger"/>
                    <body name="right_little_mcp" pos="0 0 0">
                      <joint name="right_little_mcp_flex" type="hinge" axis="0 1 0" range="-0.25 1.45" class="finger"/>
                      <geom type="capsule" size="0.0056 0.0095" fromto="0 0 0 0.019 0 0"/>
                      <geom type="capsule" size="0.0048 0.0095" fromto="0.003 0 0 0.019 0 0"/>
                      <body name="right_little_pip" pos="0.019 0 0">
                        <joint name="right_little_pip" type="hinge" axis="0 1 0" range="0 1.20" class="finger"/>
                        <geom type="capsule" size="0.0053 0.008" fromto="0 0 0 0.016 0 0"/>
                        <geom type="capsule" size="0.0045 0.008" fromto="0.003 0 0 0.016 0 0"/>
                        <body name="right_little_dip" pos="0.016 0 0">
                          <joint name="right_little_dip" type="hinge" axis="0 1 0" range="0 0.95" class="finger"/>
                          <geom type="capsule" size="0.0050 0.007" fromto="0 0 0 0.014 0 0"/>
                          <geom type="capsule" size="0.0043 0.007" fromto="0.003 0 0 0.014 0 0"/>
                          <geom name="right_little_tip_pad" class="pad" type="sphere" size="0.0060" pos="0.014 0 0"/>
                          <site name="right_little_tip" type="sphere" size="0.0034" pos="0.014 0 0" rgba="0.1 0.9 0.1 1"/>
                        </body>
                      </body>
                    </body>
                  </body>

                </body> <!-- right_wrist_yaw_link -->
              </body>   <!-- right_wrist_pitch_link -->
            </body>     <!-- right_wrist_roll_link -->
          </body>       <!-- right_elbow_link -->
        </body>         <!-- right_shoulder_yaw_link -->
      </body>           <!-- right_shoulder_roll_link -->
    </body>             <!-- right_shoulder_pitch_link -->
  </worldbody>

    <!-- ===== Contact filters & pairs (MuJoCo 3.x) ===== -->
  <contact>
    <!-- SELF finger adjacency (giảm jitter) -->
    <!-- LEFT -->
    <exclude body1="left_thumb_cmc" body2="left_index_mcp_base"/>
    <exclude body1="left_index_mcp_base" body2="left_middle_mcp_base"/>
    <exclude body1="left_middle_mcp_base" body2="left_ring_mcp_base"/>
    <exclude body1="left_ring_mcp_base"  body2="left_little_mcp_base"/>
    <!-- RIGHT -->
    <exclude body1="right_thumb_cmc" body2="right_index_mcp_base"/>
    <exclude body1="right_index_mcp_base" body2="right_middle_mcp_base"/>
    <exclude body1="right_middle_mcp_base" body2="right_ring_mcp_base"/>
    <exclude body1="right_ring_mcp_base"  body2="right_little_mcp_base"/>

    <!-- pad ↔ cube (bám chắc) -->
    <pair geom1="right_thumb_tip_pad"  geom2="grasp_cube_geom" friction="12.0 0.15 0.035" solref="0.0010 5.0" solimp="0.988 0.999 0.00008" condim="6"/>
    <pair geom1="right_index_tip_pad"  geom2="grasp_cube_geom" friction="12.0 0.15 0.035" solref="0.0010 5.0" solimp="0.988 0.999 0.00008" condim="6"/>
    <pair geom1="right_middle_tip_pad" geom2="grasp_cube_geom" friction="12.0 0.15 0.035" solref="0.0010 5.0" solimp="0.988 0.999 0.00008" condim="6"/>
    <pair geom1="right_ring_tip_pad"   geom2="grasp_cube_geom" friction="12.0 0.15 0.035" solref="0.0010 5.0" solimp="0.988 0.999 0.00008" condim="6"/>
    <pair geom1="right_little_tip_pad" geom2="grasp_cube_geom" friction="12.0 0.15 0.035" solref="0.0010 5.0" solimp="0.988 0.999 0.00008" condim="6"/>

    <pair geom1="left_thumb_tip_pad"   geom2="grasp_cube_geom" friction="12.0 0.15 0.035" solref="0.0010 5.0" solimp="0.988 0.999 0.00008" condim="6"/>
    <pair geom1="left_index_tip_pad"   geom2="grasp_cube_geom" friction="12.0 0.15 0.035" solref="0.0010 5.0" solimp="0.988 0.999 0.00008" condim="6"/>
    <pair geom1="left_middle_tip_pad"  geom2="grasp_cube_geom" friction="12.0 0.15 0.035" solref="0.0010 5.0" solimp="0.988 0.999 0.00008" condim="6"/>
    <pair geom1="left_ring_tip_pad"    geom2="grasp_cube_geom" friction="12.0 0.15 0.035" solref="0.0010 5.0" solimp="0.988 0.999 0.00008" condim="6"/>
    <pair geom1="left_little_tip_pad"  geom2="grasp_cube_geom" friction="12.0 0.15 0.035" solref="0.0010 5.0" solimp="0.988 0.999 0.00008" condim="6"/>

    <!-- pad ↔ plate (giảm dính khi nhấc) -->
    <pair geom1="right_thumb_tip_pad"  geom2="plate" friction="0.6 0.01 0.001" solref="0.0018 3.0" solimp="0.97 0.999 0.00020" condim="6"/>
    <pair geom1="right_index_tip_pad"  geom2="plate" friction="0.6 0.01 0.001" solref="0.0018 3.0" solimp="0.97 0.999 0.00020" condim="6"/>
    <pair geom1="right_middle_tip_pad" geom2="plate" friction="0.6 0.01 0.001" solref="0.0018 3.0" solimp="0.97 0.999 0.00020" condim="6"/>
    <pair geom1="right_ring_tip_pad"   geom2="plate" friction="0.6 0.01 0.001" solref="0.0018 3.0" solimp="0.97 0.999 0.00020" condim="6"/>
    <pair geom1="right_little_tip_pad" geom2="plate" friction="0.6 0.01 0.001" solref="0.0018 3.0" solimp="0.97 0.999 0.00020" condim="6"/>

    <pair geom1="left_thumb_tip_pad"   geom2="plate" friction="0.6 0.01 0.001" solref="0.0018 3.0" solimp="0.97 0.999 0.00020" condim="6"/>
    <pair geom1="left_index_tip_pad"   geom2="plate" friction="0.6 0.01 0.001" solref="0.0018 3.0" solimp="0.97 0.999 0.00020" condim="6"/>
    <pair geom1="left_middle_tip_pad"  geom2="plate" friction="0.6 0.01 0.001" solref="0.0018 3.0" solimp="0.97 0.999 0.00020" condim="6"/>
    <pair geom1="left_ring_tip_pad"    geom2="plate" friction="0.6 0.01 0.001" solref="0.0018 3.0" solimp="0.97 0.999 0.00020" condim="6"/>
    <pair geom1="left_little_tip_pad"  geom2="plate" friction="0.6 0.01 0.001" solref="0.0018 3.0" solimp="0.97 0.999 0.00020" condim="6"/>
  </contact>

  <!-- ===== Finger coupling: DIP â‰ˆ 0.80 * PIP ===== -->
  <equality>
    <!-- LEFT -->
    <joint joint1="left_thumb_pip"  joint2="left_thumb_dip"  polycoef="0 0.80 0 0 0"/>
    <joint joint1="left_index_pip"  joint2="left_index_dip"  polycoef="0 0.80 0 0 0"/>
    <joint joint1="left_middle_pip" joint2="left_middle_dip" polycoef="0 0.80 0 0 0"/>
    <joint joint1="left_ring_pip"   joint2="left_ring_dip"   polycoef="0 0.80 0 0 0"/>
    <joint joint1="left_little_pip" joint2="left_little_dip" polycoef="0 0.80 0 0 0"/>
    <!-- RIGHT -->
    <joint joint1="right_thumb_pip"  joint2="right_thumb_dip"  polycoef="0 0.80 0 0 0"/>
    <joint joint1="right_index_pip"  joint2="right_index_dip"  polycoef="0 0.80 0 0 0"/>
    <joint joint1="right_middle_pip" joint2="right_middle_dip" polycoef="0 0.80 0 0 0"/>
    <joint joint1="right_ring_pip"   joint2="right_ring_dip"   polycoef="0 0.80 0 0 0"/>
    <joint joint1="right_little_pip" joint2="right_little_dip" polycoef="0 0.80 0 0 0"/>
  </equality>

  <!-- ===== Tendon synergies (thÃªm adduction bias Ä‘á»ƒ tá»± chá»¥m) ===== -->
  <tendon>
    <!-- LEFT fingers -->
    <fixed name="left_thumb_synergy" limited="true" range="-0.35 0.35">
      <joint joint="left_thumb_mcp" coef="-1.0"/>
      <joint joint="left_thumb_pip" coef="-0.8"/>
      <joint joint="left_thumb_dip" coef="-0.55"/>
    </fixed>
    <fixed name="left_index_synergy" limited="true" range="-0.35 0.35">
      <joint joint="left_index_mcp_abd"  coef="-0.15"/>
      <joint joint="left_index_mcp_flex" coef="-1.0"/>
      <joint joint="left_index_pip"      coef="-0.8"/>
      <joint joint="left_index_dip"      coef="-0.55"/>
    </fixed>
    <fixed name="left_middle_synergy" limited="true" range="-0.35 0.35">
      <joint joint="left_middle_mcp_abd"  coef="-0.10"/>
      <joint joint="left_middle_mcp_flex" coef="-1.0"/>
      <joint joint="left_middle_pip"      coef="-0.8"/>
      <joint joint="left_middle_dip"      coef="-0.55"/>
    </fixed>
    <fixed name="left_ring_synergy" limited="true" range="-0.35 0.35">
      <joint joint="left_ring_mcp_abd"  coef="-0.15"/>
      <joint joint="left_ring_mcp_flex" coef="-0.95"/>
      <joint joint="left_ring_pip"      coef="-0.80"/>
      <joint joint="left_ring_dip"      coef="-0.55"/>
    </fixed>
    <fixed name="left_little_synergy" limited="true" range="-0.35 0.35">
      <joint joint="left_little_mcp_abd"  coef="-0.20"/>
      <joint joint="left_little_mcp_flex" coef="-0.90"/>
      <joint joint="left_little_pip"      coef="-0.70"/>
      <joint joint="left_little_dip"      coef="-0.50"/>
    </fixed>

    <!-- RIGHT fingers -->
    <fixed name="right_thumb_synergy" limited="true" range="-0.35 0.35">
      <joint joint="right_thumb_mcp" coef="-1.0"/>
      <joint joint="right_thumb_pip" coef="-0.8"/>
      <joint joint="right_thumb_dip" coef="-0.55"/>
    </fixed>
    <fixed name="right_index_synergy" limited="true" range="-0.35 0.35">
      <joint joint="right_index_mcp_abd"  coef="-0.15"/>
      <joint joint="right_index_mcp_flex" coef="-1.0"/>
      <joint joint="right_index_pip"      coef="-0.8"/>
      <joint joint="right_index_dip"      coef="-0.55"/>
    </fixed>
    <fixed name="right_middle_synergy" limited="true" range="-0.35 0.35">
      <joint joint="right_middle_mcp_abd"  coef="-0.10"/>
      <joint joint="right_middle_mcp_flex" coef="-1.0"/>
      <joint joint="right_middle_pip"      coef="-0.8"/>
      <joint joint="right_middle_dip"      coef="-0.55"/>
    </fixed>
    <fixed name="right_ring_synergy" limited="true" range="-0.35 0.35">
      <joint joint="right_ring_mcp_abd"  coef="-0.15"/>
      <joint joint="right_ring_mcp_flex" coef="-0.95"/>
      <joint joint="right_ring_pip"      coef="-0.80"/>
      <joint joint="right_ring_dip"      coef="-0.55"/>
    </fixed>
    <fixed name="right_little_synergy" limited="true" range="-0.35 0.35">
      <joint joint="right_little_mcp_abd"  coef="-0.20"/>
      <joint joint="right_little_mcp_flex" coef="-0.90"/>
      <joint joint="right_little_pip"      coef="-0.70"/>
      <joint joint="right_little_dip"      coef="-0.50"/>
    </fixed>

    <!-- FIST tendon (Ä‘Ã³ng cáº£ bÃ n) -->
    <fixed name="left_fist_synergy" limited="true" range="-0.32 0.32">
      <joint joint="left_thumb_mcp" coef="-0.8"/>
      <joint joint="left_thumb_pip" coef="-0.6"/>
      <joint joint="left_thumb_dip" coef="-0.4"/>
      <joint joint="left_index_mcp_flex" coef="-1.0"/>
      <joint joint="left_index_pip" coef="-0.8"/>
      <joint joint="left_index_dip" coef="-0.6"/>
      <joint joint="left_middle_mcp_flex" coef="-1.0"/>
      <joint joint="left_middle_pip" coef="-0.8"/>
      <joint joint="left_middle_dip" coef="-0.6"/>
      <joint joint="left_ring_mcp_flex" coef="-0.9"/>
      <joint joint="left_ring_pip" coef="-0.75"/>
      <joint joint="left_ring_dip" coef="-0.55"/>
      <joint joint="left_little_mcp_flex" coef="-0.8"/>
      <joint joint="left_little_pip" coef="-0.6"/>
      <joint joint="left_little_dip" coef="-0.4"/>
    </fixed>

    <fixed name="right_fist_synergy" limited="true" range="-0.32 0.32">
      <joint joint="right_thumb_mcp" coef="-0.8"/>
      <joint joint="right_thumb_pip" coef="-0.6"/>
      <joint joint="right_thumb_dip" coef="-0.4"/>
      <joint joint="right_index_mcp_flex" coef="-1.0"/>
      <joint joint="right_index_pip" coef="-0.8"/>
      <joint joint="right_index_dip" coef="-0.6"/>
      <joint joint="right_middle_mcp_flex" coef="-1.0"/>
      <joint joint="right_middle_pip" coef="-0.8"/>
      <joint joint="right_middle_dip" coef="-0.6"/>
      <joint joint="right_ring_mcp_flex" coef="-0.9"/>
      <joint joint="right_ring_pip" coef="-0.75"/>
      <joint joint="right_ring_dip" coef="-0.55"/>
      <joint joint="right_little_mcp_flex" coef="-0.8"/>
      <joint joint="right_little_pip" coef="-0.6"/>
      <joint joint="right_little_dip" coef="-0.4"/>
    </fixed>
  </tendon>

  <!-- ===== Actuators ===== -->
  <actuator>
    <!-- ARMS (group=1) -->
    <motor name="left_shoulder_pitch_act" joint="left_shoulder_pitch_joint" ctrllimited="true" ctrlrange="-1 1" gear="120" group="1"/>
    <motor name="left_shoulder_roll_act"  joint="left_shoulder_roll_joint"  ctrllimited="true" ctrlrange="-1 1" gear="120" group="1"/>
    <motor name="left_shoulder_yaw_act"   joint="left_shoulder_yaw_joint"   ctrllimited="true" ctrlrange="-1 1" gear="110" group="1"/>
    <motor name="left_elbow_act"          joint="left_elbow_joint"          ctrllimited="true" ctrlrange="-1 1" gear="110" group="1"/>
    <motor name="left_wrist_roll_act"     joint="left_wrist_roll_joint"     ctrllimited="true" ctrlrange="-1 1" gear="90"  group="1"/>
    <motor name="left_wrist_pitch_act"    joint="left_wrist_pitch_joint"    ctrllimited="true" ctrlrange="-1 1" gear="90"  group="1"/>
    <motor name="left_wrist_yaw_act"      joint="left_wrist_yaw_joint"      ctrllimited="true" ctrlrange="-1 1" gear="90"  group="1"/>

    <motor name="right_shoulder_pitch_act" joint="right_shoulder_pitch_joint" ctrllimited="true" ctrlrange="-1 1" gear="120" group="1"/>
    <motor name="right_shoulder_roll_act"  joint="right_shoulder_roll_joint"  ctrllimited="true" ctrlrange="-1 1" gear="120" group="1"/>
    <motor name="right_shoulder_yaw_act"   joint="right_shoulder_yaw_joint"   ctrllimited="true" ctrlrange="-1 1" gear="110" group="1"/>
    <motor name="right_elbow_act"          joint="right_elbow_joint"          ctrllimited="true" ctrlrange="-1 1" gear="110" group="1"/>
    <motor name="right_wrist_roll_act"     joint="right_wrist_roll_joint"     ctrllimited="true" ctrlrange="-1 1" gear="90"  group="1"/>
    <motor name="right_wrist_pitch_act"    joint="right_wrist_pitch_joint"    ctrllimited="true" ctrlrange="-1 1" gear="90"  group="1"/>
    <motor name="right_wrist_yaw_act"      joint="right_wrist_yaw_joint"      ctrllimited="true" ctrlrange="-1 1" gear="90"  group="1"/>

    <!-- FINGER SYNERGIES (group=2) -->
    <general name="left_thumb_close"  tendon="left_thumb_synergy"  dyntype="none" gainprm="1900" biasprm="0" ctrlrange="-0.28 0.28" group="2"/>
    <general name="left_index_close"  tendon="left_index_synergy"  dyntype="none" gainprm="1800" biasprm="0" ctrlrange="-0.28 0.28" group="2"/>
    <general name="left_middle_close" tendon="left_middle_synergy" dyntype="none" gainprm="1800" biasprm="0" ctrlrange="-0.28 0.28" group="2"/>
    <general name="left_ring_close"   tendon="left_ring_synergy"   dyntype="none" gainprm="1750" biasprm="0" ctrlrange="-0.28 0.28" group="2"/>
    <general name="left_little_close" tendon="left_little_synergy" dyntype="none" gainprm="1700" biasprm="0" ctrlrange="-0.28 0.28" group="2"/>

    <general name="right_thumb_close"  tendon="right_thumb_synergy"  dyntype="none" gainprm="1900" biasprm="0" ctrlrange="-0.28 0.28" group="2"/>
    <general name="right_index_close"  tendon="right_index_synergy"  dyntype="none" gainprm="1800" biasprm="0" ctrlrange="-0.28 0.28" group="2"/>
    <general name="right_middle_close" tendon="right_middle_synergy" dyntype="none" gainprm="1800" biasprm="0" ctrlrange="-0.28 0.28" group="2"/>
    <general name="right_ring_close"   tendon="right_ring_synergy"   dyntype="none" gainprm="1750" biasprm="0" ctrlrange="-0.28 0.28" group="2"/>
    <general name="right_little_close" tendon="right_little_synergy" dyntype="none" gainprm="1700" biasprm="0" ctrlrange="-0.28 0.28" group="2"/>

    <!-- FIST MACRO (group=3) -->
    <general name="left_fist"  tendon="left_fist_synergy"  dyntype="none" gainprm="2600" biasprm="0" ctrlrange="-0.26 0.26" group="3"/>
    <general name="right_fist" tendon="right_fist_synergy" dyntype="none" gainprm="2600" biasprm="0" ctrlrange="-0.26 0.26" group="3"/>
  </actuator>

  <!-- ===== Sensors ===== -->
  <sensor>
    <!-- EE pose/vel/wrench -->
    <framepos    name="left_ee_pos"     objtype="site" objname="left_ee_site"/>
    <framequat   name="left_ee_quat"    objtype="site" objname="left_ee_site"/>
    <framelinvel name="left_ee_linvel"  objtype="site" objname="left_ee_site"/>
    <frameangvel name="left_ee_angvel"  objtype="site" objname="left_ee_site"/>
    <force       name="left_ee_force"   site="left_ee_site"/>
    <torque      name="left_ee_torque"  site="left_ee_site"/>

    <framepos    name="right_ee_pos"     objtype="site" objname="right_ee_site"/>
    <framequat   name="right_ee_quat"    objtype="site" objname="right_ee_site"/>
    <framelinvel name="right_ee_linvel"  objtype="site" objname="right_ee_site"/>
    <frameangvel name="right_ee_angvel"  objtype="site" objname="right_ee_site"/>
    <force       name="right_ee_force"   site="right_ee_site"/>
    <torque      name="right_ee_torque"  site="right_ee_site"/>

    <!-- EE linear acceleration -->
    <accelerometer name="left_ee_acc"  site="left_ee_site"/>
    <accelerometer name="right_ee_acc" site="right_ee_site"/>

    <!-- IMU (acc + gyro) á»Ÿ cá»• tay -->
    <accelerometer name="left_wrist_acc"  site="left_wrist_imu"/>
    <gyro          name="left_wrist_gyro" site="left_wrist_imu"/>
    <accelerometer name="right_wrist_acc" site="right_wrist_imu"/>
    <gyro          name="right_wrist_gyro" site="right_wrist_imu"/>

    <!-- Privileged subtree -->
    <subtreecom     name="left_arm_com"   body="left_shoulder_pitch_link"/>
    <subtreelinvel  name="left_arm_vlin"  body="left_shoulder_pitch_link"/>
    <subtreeangmom  name="left_arm_amom"  body="left_shoulder_pitch_link"/>
    <subtreecom     name="right_arm_com"  body="right_shoulder_pitch_link"/>
    <subtreelinvel  name="right_arm_vlin" body="right_shoulder_pitch_link"/>
    <subtreeangmom  name="right_arm_amom" body="right_shoulder_pitch_link"/>

    <!-- Actuator forces -->
    <actuatorfrc name="l_sh_pitch_tau" actuator="left_shoulder_pitch_act"/>
    <actuatorfrc name="l_sh_roll_tau"  actuator="left_shoulder_roll_act"/>
    <actuatorfrc name="l_sh_yaw_tau"   actuator="left_shoulder_yaw_act"/>
    <actuatorfrc name="l_elb_tau"      actuator="left_elbow_act"/>
    <actuatorfrc name="l_w_roll_tau"   actuator="left_wrist_roll_act"/>
    <actuatorfrc name="l_w_pitch_tau"  actuator="left_wrist_pitch_act"/>
    <actuatorfrc name="l_w_yaw_tau"    actuator="left_wrist_yaw_act"/>

    <actuatorfrc name="r_sh_pitch_tau" actuator="right_shoulder_pitch_act"/>
    <actuatorfrc name="r_sh_roll_tau"  actuator="right_shoulder_roll_act"/>
    <actuatorfrc name="r_sh_yaw_tau"   actuator="right_shoulder_yaw_act"/>
    <actuatorfrc name="r_elb_tau"      actuator="right_elbow_act"/>
    <actuatorfrc name="r_w_roll_tau"   actuator="right_wrist_roll_act"/>
    <actuatorfrc name="r_w_pitch_tau"  actuator="right_wrist_pitch_act"/>
    <actuatorfrc name="r_w_yaw_tau"    actuator="right_wrist_yaw_act"/>

    <!-- Joint states -->
    <jointpos name="left_shoulder_pitch_pos"  joint="left_shoulder_pitch_joint"/>
    <jointpos name="left_shoulder_roll_pos"   joint="left_shoulder_roll_joint"/>
    <jointpos name="left_shoulder_yaw_pos"    joint="left_shoulder_yaw_joint"/>
    <jointpos name="left_elbow_pos"           joint="left_elbow_joint"/>
    <jointpos name="left_wrist_roll_pos"      joint="left_wrist_roll_joint"/>
    <jointpos name="left_wrist_pitch_pos"     joint="left_wrist_pitch_joint"/>
    <jointpos name="left_wrist_yaw_pos"       joint="left_wrist_yaw_joint"/>

    <jointpos name="right_shoulder_pitch_pos" joint="right_shoulder_pitch_joint"/>
    <jointpos name="right_shoulder_roll_pos"  joint="right_shoulder_roll_joint"/>
    <jointpos name="right_shoulder_yaw_pos"   joint="right_shoulder_yaw_joint"/>
    <jointpos name="right_elbow_pos"          joint="right_elbow_joint"/>
    <jointpos name="right_wrist_roll_pos"     joint="right_wrist_roll_joint"/>
    <jointpos name="right_wrist_pitch_pos"    joint="right_wrist_pitch_joint"/>
    <jointpos name="right_wrist_yaw_pos"      joint="right_wrist_yaw_joint"/>

    <jointvel name="left_shoulder_pitch_vel"  joint="left_shoulder_pitch_joint"/>
    <jointvel name="left_shoulder_roll_vel"   joint="left_shoulder_roll_joint"/>
    <jointvel name="left_shoulder_yaw_vel"    joint="left_shoulder_yaw_joint"/>
    <jointvel name="left_elbow_vel"           joint="left_elbow_joint"/>
    <jointvel name="left_wrist_roll_vel"      joint="left_wrist_roll_joint"/>
    <jointvel name="left_wrist_pitch_vel"     joint="left_wrist_pitch_joint"/>
    <jointvel name="left_wrist_yaw_vel"       joint="left_wrist_yaw_joint"/>

    <jointvel name="right_shoulder_pitch_vel" joint="right_shoulder_pitch_joint"/>
    <jointvel name="right_shoulder_roll_vel"  joint="right_shoulder_roll_joint"/>
    <jointvel name="right_shoulder_yaw_vel"   joint="right_shoulder_yaw_joint"/>
    <jointvel name="right_elbow_vel"          joint="right_elbow_joint"/>
    <jointvel name="right_wrist_roll_vel"     joint="right_wrist_roll_joint"/>
    <jointvel name="right_wrist_pitch_vel"    joint="right_wrist_pitch_joint"/>
    <jointvel name="right_wrist_yaw_vel"      joint="right_wrist_yaw_joint"/>

    <!-- Fingertip touches (sites) -->
    <touch name="left_thumb_touch"  site="left_thumb_tip"/>
    <touch name="left_index_touch"  site="left_index_tip"/>
    <touch name="left_middle_touch" site="left_middle_tip"/>
    <touch name="left_ring_touch"   site="left_ring_tip"/>
    <touch name="left_little_touch" site="left_little_tip"/>

    <touch name="right_thumb_touch"  site="right_thumb_tip"/>
    <touch name="right_index_touch"  site="right_index_tip"/>
    <touch name="right_middle_touch" site="right_middle_tip"/>
    <touch name="right_ring_touch"   site="right_ring_tip"/>
    <touch name="right_little_touch" site="right_little_tip"/>

    <!-- Rangefinders -->
    <rangefinder name="left_rf_center_dist"  site="left_rf_center"/>
    <rangefinder name="left_rf_u_dist"       site="left_rf_u"/>
    <rangefinder name="left_rf_d_dist"       site="left_rf_d"/>
    <rangefinder name="right_rf_center_dist" site="right_rf_center"/>
    <rangefinder name="right_rf_u_dist"      site="right_rf_u"/>
    <rangefinder name="right_rf_d_dist"      site="right_rf_d"/>

    <!-- Object / plate -->
    <framepos  name="cube_top_pos"  objtype="site" objname="cube_top"/>
    <framepos  name="plate_top_pos" objtype="site" objname="plate_top"/>

    <!-- Palm wrench -->
    <force  name="left_palm_force"  site="left_palm_center"/>
    <torque name="left_palm_torque" site="left_palm_center"/>
    <force  name="right_palm_force" site="right_palm_center"/>
    <torque name="right_palm_torque" site="right_palm_center"/>

    <!-- Wrist vlin/vang -->
    <framelinvel name="left_wrist_vlin"  objtype="site" objname="left_wrist_imu"/>
    <frameangvel name="left_wrist_vang"  objtype="site" objname="left_wrist_imu"/>
    <framelinvel name="right_wrist_vlin" objtype="site" objname="right_wrist_imu"/>
    <frameangvel name="right_wrist_vang" objtype="site" objname="right_wrist_imu"/>

    <!-- Actuator "position" readback cho FIST -->
    <actuatorpos name="u_left_fist"  actuator="left_fist"/>
    <actuatorpos name="u_right_fist" actuator="right_fist"/>
  </sensor>

  <!-- Keyframes: open / preload / close -->
  <keyframe>
    <key name="hands_open"/>
    <key name="hands_preload" qpos="0 0 0 0 0 0"/>
    <key name="hands_close"/>
  </keyframe>

</mujoco>

